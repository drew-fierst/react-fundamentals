{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\drew\\\\source\\\\repos\\\\Courseware\\\\ReactFundamentals\\\\ClassFiles\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\drew\\\\source\\\\repos\\\\Courseware\\\\ReactFundamentals\\\\ClassFiles\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\drew\\\\source\\\\repos\\\\Courseware\\\\ReactFundamentals\\\\ClassFiles\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\drew\\\\source\\\\repos\\\\Courseware\\\\ReactFundamentals\\\\ClassFiles\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\drew\\\\source\\\\repos\\\\Courseware\\\\ReactFundamentals\\\\ClassFiles\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\drew\\\\source\\\\repos\\\\Courseware\\\\ReactFundamentals\\\\ClassFiles\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\drew\\\\source\\\\repos\\\\Courseware\\\\ReactFundamentals\\\\ClassFiles\\\\Finished\\\\Exercise16\\\\kazoo-promotions\\\\src\\\\containers\\\\User\\\\LogInOut.js\";\nimport React, { Component } from 'react';\nimport styles from './LogInOut.module.css';\nimport formBuilder from '../../formBuilder';\nimport { toast } from 'react-toastify';\nimport { connect } from 'react-redux';\nimport * as actions from '../../store/actions';\n\nvar LogInOut =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LogInOut, _Component);\n\n  function LogInOut() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LogInOut);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LogInOut)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loginForm: {\n        userName: formBuilder.configInput('input', 'text', 'User Name', null, {\n          required: true\n        }),\n        password: formBuilder.configInput('input', 'password', 'Password', null, {\n          required: true\n        })\n      }\n    };\n\n    _this.inputChangedHandler = function (evt, id) {\n      var updatedForm = _objectSpread({}, _this.state.loginForm);\n\n      var updatedElement = updatedForm[id];\n      updatedElement.value = evt.target.value;\n      formBuilder.checkValidity(updatedElement);\n      updatedForm[id] = updatedElement;\n\n      _this.setState({\n        loginForm: updatedForm\n      });\n    };\n\n    _this.handleLogIn = function (evt) {\n      evt.preventDefault();\n\n      if (formBuilder.validateForm(_this.state.loginForm)) {\n        //dispatch the login action with appropriate data\n        _this.props.onLogin(_this.state.loginForm.userName.value, _this.state.loginForm.password.value).then(function () {\n          return _this.props.history.push('/');\n        }).catch(function (err) {\n          toast.error('invalid login');\n        });\n      } else {\n        _this.forceUpdate(); //necessary b/c validateForm() mutates existing state directly\n\n\n        toast.error('you must properly fill out the form');\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(LogInOut, [{\n    key: \"render\",\n    value: function render() {\n      var formContent = formBuilder.buildForm(this.state.loginForm, this.inputChangedHandler);\n      var content = React.createElement(\"form\", {\n        className: styles.login,\n        onSubmit: this.handleLogIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, formContent, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Log In\"));\n\n      if (this.props.currentUser) {\n        content = React.createElement(\"p\", {\n          className: styles.login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: this.props.onLogout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, \"Log Out\"));\n      }\n\n      return React.createElement(\"div\", {\n        className: styles.wrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Kazoo Promotions.\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \" Account\")), React.createElement(\"div\", {\n        className: styles.content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, content));\n    }\n  }]);\n\n  return LogInOut;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    currentUser: state.account.user\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onLogout: function onLogout() {\n      return dispatch(actions.logoutUser());\n    },\n    onLogin: function onLogin(login, pwd) {\n      return dispatch(actions.loginUser(login, pwd));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogInOut);","map":{"version":3,"sources":["C:\\Users\\drew\\source\\repos\\Courseware\\ReactFundamentals\\ClassFiles\\Finished\\Exercise16\\kazoo-promotions\\src\\containers\\User\\LogInOut.js"],"names":["React","Component","styles","formBuilder","toast","connect","actions","LogInOut","state","loginForm","userName","configInput","required","password","inputChangedHandler","evt","id","updatedForm","updatedElement","value","target","checkValidity","setState","handleLogIn","preventDefault","validateForm","props","onLogin","then","history","push","catch","err","error","forceUpdate","formContent","buildForm","content","login","currentUser","onLogout","wrapper","mapStateToProps","account","user","mapDispatchToProps","dispatch","logoutUser","pwd","loginUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport styles from './LogInOut.module.css';\r\nimport formBuilder from '../../formBuilder';\r\nimport { toast } from 'react-toastify';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../store/actions';\r\n\r\nclass LogInOut extends Component {\r\n\r\n\tstate = {\r\n\t\tloginForm: {\r\n\t\t\tuserName: formBuilder.configInput('input', 'text', 'User Name', null, {required: true}),\r\n\t\t\tpassword: formBuilder.configInput('input', 'password', 'Password', null, {required: true})\r\n\t\t}\r\n\t}\r\n\r\n\tinputChangedHandler = (evt, id) => {\r\n    const updatedForm = { ...this.state.loginForm };\r\n\r\n    const updatedElement = updatedForm[id];\r\n    updatedElement.value = evt.target.value;\r\n    formBuilder.checkValidity(updatedElement);\r\n\r\n    updatedForm[id] = updatedElement;\r\n    this.setState({ loginForm: updatedForm });\r\n\t};\r\n\r\n\thandleLogIn = (evt) => {\r\n\t\tevt.preventDefault();\r\n\t\tif (formBuilder.validateForm(this.state.loginForm)) {\r\n\t\t\t//dispatch the login action with appropriate data\r\n\t\t\tthis.props.onLogin(this.state.loginForm.userName.value, this.state.loginForm.password.value)\r\n\t\t\t\t.then(() => this.props.history.push('/'))\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\ttoast.error('invalid login');\r\n\t\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.forceUpdate();\t//necessary b/c validateForm() mutates existing state directly\r\n\t\t\ttoast.error('you must properly fill out the form');\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formContent = formBuilder.buildForm(this.state.loginForm, this.inputChangedHandler);\r\n\t\tlet content = <form className={styles.login} onSubmit={this.handleLogIn}>\r\n\t\t\t{formContent}\r\n\t\t\t<button>Log In</button>\r\n\t\t</form>;\r\n\r\n\t\tif (this.props.currentUser) {\r\n\t\t\tcontent = <p className={styles.login}><button onClick={this.props.onLogout}>Log Out</button></p>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className={styles.wrapper}>\r\n\t\t\t\t<h1>Kazoo Promotions.<span> Account</span></h1>\r\n\t\t\t\t<div className={styles.content}>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tcurrentUser: state.account.user\r\n\t}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLogout: () => dispatch(actions.logoutUser()),\r\n\t\tonLogin: (login, pwd) => dispatch(actions.loginUser(login, pwd)) \r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LogInOut);\r\n"]},"metadata":{},"sourceType":"module"}